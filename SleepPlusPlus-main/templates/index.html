
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../static/style.css">
  <title>Sleep++</title>
<script>
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}


function validateID() {
var pid=document.getElementById("pid").value;
var validated=false;
try { //make sure the pid contains the correct verification code
        /*
    if (pid.charAt(1) == '9') {
    if (pid.charAt(3) == '2') {
    if (pid.charAt(5) == '3') {
    if (pid.charAt(7) == '6') {
    validated=true;
    }
    }
    }
    }
    regex instead of if statements
    digit9digit2digit3digit6
    // Those are the correct digits for the verification code
    */
    const regex = /^\d9\d2\d3\d6$/;
    if (regex.test(pid)) {
    validated=true;
    }
}
catch (error) {
alert("Participant ID not found. Make sure you have entered the ID number exactly as you received it, with no extra spaces or non-numeric characters.\nEntered ID: " + pid);
}
if (validated) {
setCookie("pid",document.getElementById("pid").value,365*2);
setCookie("stage","sleep",365*2);
location.reload();
}
else {
alert("Participant ID not found. Make sure you have entered the ID number exactly as you received it, with no extra spaces or non-numeric characters.\nEntered ID: " + pid);
}
}
</script>
</head>
<body>
  <h1>Welcome!</h1><br>
  <h2>Please enter your participant ID below, then click continue</h2>
<form>
<input type="text" id="pid" style="width:75%" placeholder="Participant ID"> </input>
<br>
<button onclick="validateID()" style="width:75%">Continue</button>
</form>

</body>
</html>

